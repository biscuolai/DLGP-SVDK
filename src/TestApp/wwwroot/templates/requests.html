<div class="row table-responsive" ng-controller="datagridController as vm">
    <div class="col-lg-12">
        <app-widget>
            <app-widget-header icon="fa-tasks" title="List of tickets">
                <div class="col-md-4">
                    <div class="col-md-6">
                        <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            {{ vm.selectedItem }}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                            <li ng-repeat="item in vm.StatusViews"
                                value="item.name"
                                ng-click="vm.showTicketList(item.id, vm.itemsPerPage)"
                                ng-selected="item.name">
                                <a href="#/requests?action={{ item.id }}">{{ item.name }}</a>
                            </li>
                        </ul>
                    </div>
                    <div class="dropdown col-md-6">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Items per page
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li><a href="#/requests?action={{vm.selectedAction}}&amp;items=25" ng-click="vm.showTicketList(vm.selectedAction,'25')">25</a></li>
                            <li><a href="#/requests?action={{vm.selectedAction}}&amp;items=50" ng-click="vm.showTicketList(vm.selectedAction,'50')">50</a></li>
                            <li><a href="#/requests?action={{vm.selectedAction}}&amp;items=100" ng-click="vm.showTicketList(vm.selectedAction,'100')">100</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#/requests?action={{vm.selectedAction}}&amp;items=0" ng-click="vm.showTicketList(vm.selectedAction,'500')">All</a></li>
                        </ul>
                    </div>
                </div>
            </app-widget-header>
            <app-widget-body classes="medium no-padding">
                <div>
                    <table st-pipe="vm.callServer" st-table="vm.displayed" class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th style="width: 10%" st-sort="ticketId">Ticket ID</th>
                                <th style="width: 40%" st-sort="title">Title</th>
                                <th style="width: 10%" st-sort="status.name">Status</th>
                                <th style="width: 10%" st-sort="priority.name">Priority</th>
                                <th style="width: 10%" st-sort="project.projectName">Project</th>
                                <th style="width: 10%" st-sort="createdDate">Created</th>
                                <th style="width: 10%" st-sort="lastUpdateDate">Updated</th>

                            </tr>
                            <tr>
                                <th><input st-search="ticketId" placeholder="search..." class="input-sm form-control" type="search" /></th>
                                <th><input st-search="title" placeholder="search..." class="input-sm form-control" type="search" /></th>
                                <th><input st-search="status.name" placeholder="search..." class="input-sm form-control" type="search" /></th>
                                <th><input st-search="priority.name" placeholder="search..." class="input-sm form-control" type="search" /></th>
                                <th><input st-search="project.projectName" placeholder="search..." class="input-sm form-control" type="search" /></th>
                                <th>&nbsp;</th>
                                <th>&nbsp;</th>

                            </tr>
                        </thead>
                        <tbody ng-show="!vm.isLoading">
                            <tr ng-repeat="row in vm.displayed | filter: { status : { name: vm.queryResponse.status }, assignedTo : vm.queryResponse.assignedTo } ">
                                <td><strong>{{row.ticketId}}</strong></td>
                                <td><a style="font-weight:bold;" href="#/editTicket?action=edit&amp;id={{row.ticketId}}">{{ row.title }}</a></td>
                                <td>{{row.status.name}}</td>
                                <td>{{row.priority.name}}</td>
                                <td>{{row.project.projectName}}</td>
                                <td>{{row.createdDate | date:'dd/MM/yyyy HH:mm:ss' }}</td>
                                <td>{{row.lastUpdateDate | date:'dd/MM/yyyy HH:mm:ss' }}</td>
                            </tr>
                        </tbody>
                        <tbody ng-show="vm.isLoading">
                            <tr>
                                <td colspan="7" class="text-center"><app-loading ng-show="vm.isLoading"></app-loading></td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td class="text-center" st-pagination="" st-items-by-page="vm.itemsPerPage" colspan="7"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </app-widget-body>
        </app-widget>
    </div>
</div>
