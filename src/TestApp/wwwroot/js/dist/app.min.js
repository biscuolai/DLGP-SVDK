!function(){"use strict";angular.module("Authentication",[]),angular.module("ShowMessage",[]),angular.module("app",["ui.bootstrap","Authentication","ShowMessage","ngRoute","ngResource","ui.router","ngCookies","ngMessages","chart.js","smart-table","fileUpload"]).run(["$rootScope","$location","$cookieStore","$http",function(e,t,o,a){e.globals=o.get("globals")||{},e.globals.currentUser&&(a.defaults.headers.common.Authorization="Basic "+e.globals.currentUser.authdata),e.$on("$locationChangeStart",function(o,a,r){"/register"===t.path()||"/forgotpassword"===t.path()||"/resetpassword"===t.path()||"/login"===t.path()||e.globals.currentUser||t.path("/login")})}])}(),function(){"use strict";angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("dashboard",{url:"/",templateUrl:"../templates/dashboard.html",requireLogin:!0,params:{breadcrumb:"Dashboard"},controller:function(e,t){e.breadcrumb=t.breadcrumb}}).state("requests",{url:"/requests",templateUrl:"../templates/requests.html",requireLogin:!0,params:{breadcrumb:"Requests"},controller:function(e,t){e.breadcrumb=t.breadcrumb}}).state("newTicket",{url:"/newTicket",templateUrl:"../templates/newTicket.html",requireLogin:!0,params:{breadcrumb:"New Ticket"},controller:function(e,t){e.breadcrumb=t.breadcrumb}}).state("editTicket",{url:"/editTicket",templateUrl:"../templates/editTicket.html",requireLogin:!0,params:{breadcrumb:"Edit Ticket"},controller:function(e,t){e.breadcrumb=t.breadcrumb}}).state("about",{url:"/about",templateUrl:"../templates/about.html",requireLogin:!0,params:{breadcrumb:"About"},controller:function(e,t){e.breadcrumb=t.breadcrumb}}).state("contact",{url:"/contact",templateUrl:"../templates/contact.html",params:{breadcrumb:"Contact"},controller:function(e,t){e.breadcrumb=t.breadcrumb}}).state("login",{url:"/login",templateUrl:"../templates/login.html",controller:"loginController",hideMenus:!0}).state("forgotpassword",{url:"/forgotpassword",templateUrl:"../templates/forgotPassword.html",controller:"forgotPasswordController",hideMenus:!0}).state("resetpassword",{url:"/resetpassword",templateUrl:"../templates/resetPassword.html",controller:"resetPasswordController",hideMenus:!0}).state("attachments",{url:"/attachments",templateUrl:"../templates/attachments.html",controller:"fileUploadController"}).state("app.error",{url:"/error/:error",templateUrl:"../templates/error.html",accessLevel:accessLevels["public"]}).state("app.home",{url:"/",templateUrl:"../templates/index.html",controller:"homeController"}).state("app.admin",{url:"/admin",templateUrl:"../templates/admin.html",accessLevel:accessLevels.admin}).state("app.user",{url:"/user",templateUrl:"../templates/user.html",accessLevel:accessLevels.user}).state("register",{url:"/register",templateUrl:"../templates/register.html",controller:"registerController",accessLevel:accessLevels["public"]}),t.otherwise("/login")}])}(),function(){"use strict";angular.module("app").constant("Constants",{})}(),function(){"use strict";function e(e,t,o,a){function r(){e.get("/api/dashboard").success(function(e){t.Dashboard=e.data,t.newTickets=t.Dashboard["new"],t.openTickets=t.Dashboard.open,t.onHoldTickets=t.Dashboard.onHold,t.pendingTickets=t.Dashboard.pending,t.resolvedTickets=t.Dashboard.resolved,t.cancelledTickets=t.Dashboard.cancelled,t.closedTickets=t.Dashboard.closed,t.monthlyData.push(t.Dashboard.dashboardMonthlyData);t.data=[],t.series=[],t.labels=[];try{for(var o=0;o<t.monthlyData[0].ticketSummary.length;o++){t.labels.push(t.monthlyData[0].ticketSummary[o].months[o]),t.data.push([]),t.data[o].push(new Array(t.monthlyData[0].ticketSummary[o].values.length));for(var r=0;r<t.monthlyData[0].ticketSummary[o].values.length;r++)t.data[o][r]=t.monthlyData[0].ticketSummary[o].values[r];t.series.push(t.monthlyData[0].ticketSummary[o].name)}}catch(n){a.clearAlert(),a.addAlert("An error has occured while loading dashboard data!","danger")}}).error(function(){a.clearAlert(),a.addAlert("An error has occured while loading dashboard data!","danger")})}r(),t.newTickets=0,t.openTickets=0,t.onHoldTickets=0,t.pendingTickets=0,t.resolvedTickets=0,t.cancelledTickets=0,t.closedTickets=0,t.monthlyData=[],o.search(""),t.options={legend:{display:!0}}}angular.module("app").controller("dashboardController",["$http","$scope","$location","MessageService",e])}(),function(){"use strict";function e(e,t,o,a,r,n,s){function i(){e.get("/api/tickets").success(function(e){a.Tickets=e.data}).error(function(){n.clearAlert(),n.addAlert("An error has occured while loading list of all tickets!","danger")})}function c(t){e.get("/api/tickets/"+t+"/events").success(function(e){a.Events=e.data}).error(function(){n.clearAlert(),n.addAlert("An error has occured while loading list of all ticket events!","danger")})}function l(t,o){e.get("/api/values/contacttype").success(function(e){a.ContactType={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.ContactType.selectedOption=r("filter")(a.ContactType.availableOptions,{contactTypeId:a.Ticket.contactTypeId})[0])}).error(function(){n.clearAlert(),n.addAlert("An error has occured while loading contact type drop down list!","danger")}),e.get("/api/values/category").success(function(e){a.Category={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.Category.selectedOption=r("filter")(a.Category.availableOptions,{categoryId:a.Ticket.categoryId})[0])}).error(function(){n.addAlert("An error has occured while loading category drop down list!","danger")}),e.get("/api/values/configurationitem").success(function(e){a.ConfigurationItem={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.ConfigurationItem.selectedOption=r("filter")(a.ConfigurationItem.availableOptions,{configurationItemId:a.Ticket.configurationItemId})[0])}).error(function(){n.addAlert("An error has occured while loading configuration item drop down list!","danger")}),e.get("/api/values/ticketstatus/"+o).success(function(e){a.TicketStatus={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.TicketStatus.selectedOption=r("filter")(a.TicketStatus.availableOptions,{ticketStatusId:a.Ticket.ticketStatusId})[0])}).error(function(){n.addAlert("An error has occured while loading ticket status drop down list!","danger")}),e.get("/api/values/priority").success(function(e){a.Priority={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.Priority.selectedOption=r("filter")(a.Priority.availableOptions,{priorityId:a.Ticket.priorityId})[0])}).error(function(){n.addAlert("An error has occured while loading priority drop down list!","danger")}),e.get("/api/projects").success(function(e){a.Projects={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.Projects.selectedOption=r("filter")(a.Projects.availableOptions,{projectId:a.Ticket.projectId})[0])}).error(function(){n.addAlert("An error has occured while loading project drop down list!","danger")}),e.get("/api/admin/users").success(function(e){a.Users={availableOptions:e.data,selectedOption:e.data[0]},t===!0&&(a.Users.selectedOption=r("filter")(a.Users.availableOptions,{id:a.Ticket.assignedTo})[0])}).error(function(){n.addAlert("An error has occured while loading assigned to drop down list!","danger")})}function u(){void 0!==a.Ticket&&(a.Ticket.projectId="",a.Ticket.contactTypeId="",a.Ticket.categoryId="",a.Ticket.configurationItemId="",a.Ticket.title="",a.Ticket.details="",a.Ticket.tagList="",a.Ticket.assignedTo="",a.Ticket.ticketStatusId="",a.Ticket.priorityId="")}a.initFirst=function(){void 0!==o.search().action&&"edit"===o.search().action&&void 0!==o.search().id&&o.search().id>0?e.get("/api/tickets/"+o.search().id).success(function(e){a.Ticket=e.data,a.originalTicket=angular.copy(a.Ticket),l(!0,o.search().id),c(o.search().id),n.clearAlert(),a.resetVariables(),a.isMoreInfo="PENDING - REQUEST FOR INFORMATION"===a.Ticket.status.name.toUpperCase(),a.isResolved="RESOLVED"===a.Ticket.status.name.toUpperCase(),a.isCancelled="CANCELLED"===a.Ticket.status.name.toUpperCase()}).error(function(){n.clearAlert(),n.addAlert("An error has occured while loading ticket id = "+o.search().id,"danger")}):void 0!==o.search().action&&"new"===o.search().action?(u(),l(!1,null),n.clearAlert()):(i(),o.search(""))},a.editTicket=function(t){e.get("/api/tickets/"+t.ticketId).success(function(e){a.Ticket=e.data,l(!0,t.ticketId),o.path("/editTicket")}).error(function(){n.addAlert("An error has occured while loading ticket id = "+t.ticketId,"danger")})},a.deleteTicket=function(e){var t=DeleteTicket(e.Id);t.then(function(e){n.addAlert(e.data),i()},function(){n.addAlert("Error in deleting Ticket record","success")})},a.cancel=function(){a.isTicketChanged()?BootstrapDialog.confirm({title:"Warning",message:"There is unsaved data. Do you still want to cancel?",type:BootstrapDialog.TYPE_WARNING,closable:!0,draggable:!0,btnCancelLabel:"No",btnOKLabel:"Yes",btnOKClass:"btn-warning",callback:function(e){e&&(a.resetVariables(),a.initFirst())}}):a.resetVariables()},a.isTicketChanged=function(){return!angular.equals(a.originalTicket,a.Ticket)},a.resetVariables=function(){a.isEditing=!1,a.isAssigning=!1,a.isRequestInfo=!1,a.isSupplyInfo=!1,a.isCancelInfo=!1,a.isAddingComment=!1},a.back=function(){a.isEditing=!1,a.isAssigning=!1,u(),window.history.back()},a.searchTicket="",a.UpdateTicket=function(t){if(!("CANCELLED"!=a.TicketStatus.selectedOption.name.toUpperCase()&&"RESOLVED"!=a.TicketStatus.selectedOption.name.toUpperCase()||void 0!==t.comments&&""!==t.comments.trim()))return n.clearAlert(),n.addAlert("Please confirm all information in Resolution Tab before resolving or cancelling a ticket.","danger"),!1;t.projectId=a.Projects.selectedOption.projectId,t.contactTypeId=a.ContactType.selectedOption.contactTypeId,t.categoryId=a.Category.selectedOption.categoryId,t.configurationItemId=a.ConfigurationItem.selectedOption.configurationItemId,t.ticketStatusId=a.TicketStatus.selectedOption.ticketStatusId,t.priorityId=a.Priority.selectedOption.priorityId;try{t.assignedTo=a.Users.selectedOption.id}catch(o){t.assignedTo=null}t.isEditing=a.isEditing,t.isRequestInfo=a.isRequestInfo,t.isSupplyInfo=a.isSupplyInfo,t.isCancelInfo=a.isCancelInfo,t.isAssigning=a.isAssigning,t.isAddingComment=a.isAddingComment,t.currentStatusDate=new Date,t.currentStatusSetBy=a.globals.currentUser.userData.userName,t.lastUpdateBy=a.globals.currentUser.userData.userName,t.lastUpdateDate=new Date,e.put("/api/tickets/"+t.ticketId,t).success(function(e){a.initFirst(),n.clearAlert(),n.addAlert("Ticket ID = "+t.ticketId+" has been updated successfully!","success")}).error(function(e){n.clearAlert(),n.addAlert("An error has occured while updating ticket id = "+t.ticketId,"danger")})},a.AddTicket=function(t){void 0!==t&&(t.projectId=a.Projects.selectedOption.projectId,t.contactTypeId=a.ContactType.selectedOption.contactTypeId,t.categoryId=a.Category.selectedOption.categoryId,t.configurationItemId=a.ConfigurationItem.selectedOption.configurationItemId,t.ticketStatusId=a.TicketStatus.selectedOption.ticketStatusId,t.priorityId=a.Priority.selectedOption.priorityId,void 0!==a.Users&&null!==a.Users.selectedOption&&null!==a.Users.selectedOption.id&&(t.assignedTo=a.Users.selectedOption.id),t.createdBy=a.globals.currentUser.userData.userName,t.createdDate=new Date,t.currentStatusDate=new Date,t.currentStatusSetBy=a.globals.currentUser.userData.userName,t.lastUpdateBy=a.globals.currentUser.userData.userName,t.lastUpdateDate=new Date,t.owner=a.globals.currentUser.userData.userName,e.post("/api/tickets",t).success(function(e){o.path("/"),n.clearAlert(),n.addAlert("A new ticket has been added successfully!","success")}).error(function(e){n.clearAlert(),n.addAlert("An error has occured while adding a new ticket!","danger")}))},a.DeleteTicket=function(t){e["delete"]("/api/tickets/"+t.TicketID).success(function(t){n.addAlert("Deleted successfully!"),e.get("/api/tickets").success(function(e){a.Tickets=e})}).error(function(e){a.error="An error has occured while deleting! "+e})},a.edit=function(){a.isEditing=!0,a.isAssigning=!1,a.isRequestInfo=!1,a.isSupplyInfo=!1,a.isCancelInfo=!1,a.isAddingComment=!1,a.commentLabel="Edit Ticket",a.scrollToComments()},a.updateStatusComment=function(){a.commentLabel="CANCELLED"===a.TicketStatus.selectedOption.name.toUpperCase()||"RESOLVED"===a.TicketStatus.selectedOption.name.toUpperCase()?"Resolution":"Edit Ticket",Ticket.ticketStatus=TicketStatus.selectedOption.ticketStatusId},a.moreInfo=function(e){a.isEditing=!1,a.isAssigning=!1,a.isRequestInfo="R"===e,a.isSupplyInfo="S"===e,a.isCancelInfo="C"===e,a.isAddingComment=!1,"R"===e?a.commentLabel="Request For Information":"S"===e?a.commentLabel="Supply More Information":"C"===e&&(a.commentLabel="Cancel More Information"),a.scrollToComments()},a.assign=function(){a.isEditing=!1,a.isAssigning=!0,a.isRequestInfo=!1,a.isSupplyInfo=!1,a.isCancelInfo=!1,a.isAddingComment=!1,a.commentLabel="Assign Ticket",a.scrollToComments()},a.addComment=function(){a.isEditing=!1,a.isAssigning=!1,a.isRequestInfo=!1,a.isSupplyInfo=!1,a.isCancelInfo=!1,a.isAddingComment=!0,a.commentLabel="Add New",a.scrollToComments()},a.editAttachments=function(){o.path("/attachments")},a.scrollToComments=function(){s(function(){var e=document.getElementById("comments");$("html,body").animate({scrollTop:$(e).offset().top},"slow"),$(e).focus()},200)}}angular.module("app").controller("ticketController",["$http","$controller","$location","$scope","$filter","MessageService","$timeout",e])}(),function(){"use strict";function e(e,t,o){var a=992;e.getWidth=function(){return window.innerWidth},e.$watch(e.getWidth,function(t,r){e.toggle=t>=a?angular.isDefined(o.get("toggle"))?o.get("toggle")?!0:!1:!0:!1}),e.toggleSidebar=function(){e.toggle=!e.toggle,o.put("toggle",e.toggle)},window.onresize=function(){e.$apply()}}angular.module("app").controller("masterController",["$scope","$http","$cookieStore",e])}(),function(){"use strict";function e(e){e.alerts=[{type:"success",msg:"Thanks for visiting! Feel free to create pull requests to improve the dashboard!"},{type:"danger",msg:"Found a bug? Create an issue with as many details as you can."}],e.addAlert=function(t,o){return e.alerts.push({type:o,msg:t}),e.alerts},e.closeAlert=function(t){e.alerts.splice(t,1)},e.clearAlert=function(){e.alerts=[]}}angular.module("app").controller("alertsController",["$scope",e])}(),function(){"use strict";function e(e){e.labels=["January","February","March","April","May","June","July"],e.data=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]],e.colours=[{fillColor:"rgba(148,159,177,0.2)",strokeColor:"rgba(148,159,177,1)",pointColor:"rgba(148,159,177,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(148,159,177,0.8)"},{fillColor:"rgba(77,83,96,0.2)",strokeColor:"rgba(77,83,96,1)",pointColor:"rgba(77,83,96,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(77,83,96,1)"}],e.randomize=function(){e.data=e.data.map(function(e){return e.map(function(e){return e=e+10*Math.random()-5,parseInt(0>e?0:e>100?100:e)})})}}angular.module("app").controller("chartController",["$scope",e])}(),function(){"use strict";function e(){var e={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return e}angular.module("app").directive("appLoading",e)}(),function(){"use strict";function e(){var e={requires:"^appWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><app-loading ng-show="loading"></app-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return e}angular.module("app").directive("appWidgetBody",e)}(),function(){"use strict";function e(){var e={requires:"^appWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("app").directive("appWidgetFooter",e)}(),function(){"use strict";function e(){var e={requires:"^appWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-10 widget-search" ng-transclude></div></div></div>',restrict:"E"};return e}angular.module("app").directive("appWidgetHeader",e)}(),function(){"use strict";function e(){var e={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return e}angular.module("app").directive("appWidget",e)}(),function(){"use strict";angular.module("app").factory("Resource",["$http","$q","$filter","$timeout",function(e,t,o,a){function r(){e.get("/api/tickets").success(function(e){s=e.data}).error(function(){s=[]})}function n(e,r,n){var i=t.defer(),c=[];null!==n?(c=n.search.predicateObject?o("filter")(s,n.search.predicateObject):s,null!==n&&n.sort.predicate&&(c=o("orderBy")(c,n.sort.predicate,n.sort.reverse)),0===r&&void 0!==c&&c.length>0&&(r=c.length)):c=s;var l=c.slice(e,e+r);return a(function(){i.resolve({data:l,numberOfPages:Math.ceil(c.length/r)})},100),i.promise}var s=[];return r(),{getPage:n}}])}(),function(){"use strict";angular.module("app").controller("datagridController",["Resource","$location","$rootScope",function(e,t,o){var a=this;a.StatusViews=[{id:0,name:"All Tickets"},{id:1,name:"My Tickets"},{id:2,name:"New Tickets"},{id:3,name:"Open Tickets"},{id:4,name:"Pending Tickets"},{id:5,name:"Resolved Tickets"},{id:6,name:"Cancelled Tickets"},{id:7,name:"Closed Tickets"}],this.displayed=[],this.pipeFunction=function(t,o){if(!a.stCtrl&&o&&(a.stCtrl=o),null!==t)var r=t.pagination,n=r.start||0,s=r.number||a.itemsPerPage;else var n=0,s=25;a.isLoading=!0,a.query="",e.getPage(n,s,t).then(function(e){a.displayed=e.data,null!==t&&(t.pagination.numberOfPages=e.numberOfPages),a.isLoading=!1})},this.showTicketList=function(e,t){switch(a.selectedAction=e,a.itemsPerPage=t,a.queryResponse={status:"",assignedTo:""},a.selectedItem=a.StatusViews[e].name,a.queryResponse.assignedTo="",a.queryResponse.status="",e){case 0:a.queryResponse.status="";break;case 1:a.queryResponse.assignedTo=o.globals.currentUser.userData.id;break;case 2:a.queryResponse.status="new";break;case 3:a.queryResponse.status="open";break;case 4:a.queryResponse.status="pending";break;case 5:a.queryResponse.status="resolved";break;case 6:a.queryResponse.status="cancelled";break;case 7:a.queryResponse.status="closed"}},a.initFirst=function(){this.pipeFunction(null,a),a.selectedAction=void 0!==t.search().action?parseInt(t.search().action):0,a.itemsPerPage=void 0!==t.search().items&&"0"!==t.search().items?parseInt(t.search().items):25,a.selectedItem="All Tickets",this.showTicketList(a.selectedAction,a.itemsPerPage)}}])}(),function(){"use strict";angular.module("Authentication").factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","$timeout",function(e,t,o,a,r){var n={};return n.Login=function(e,o,a){t({method:"POST",url:"/api/user/login",data:{username:e,password:o,rememberMe:!1},headers:{__RequestVerificationToken:$("input[name=__RequestVerificationToken]").attr("value")}}).success(function(e){a(e)})},n.Register=function(e,o,a,r,n,s){t({method:"POST",url:"/api/user/register",data:{username:e,password:o,confirmPassword:a,email:r,role:n},headers:{__RequestVerificationToken:$("input[name=__RequestVerificationToken]").attr("value")}}).success(function(e){s(e)})},n.Logoff=function(e){t({method:"POST",url:"/api/user/logoff",headers:{__RequestVerificationToken:$("input[name=__RequestVerificationToken]").attr("value")}}).success(function(t){e(t)})},n.ForgotPassword=function(e,o){t({method:"POST",url:"/api/user/forgotpassword",data:{email:e},headers:{__RequestVerificationToken:$("input[name=__RequestVerificationToken]").attr("value")}}).success(function(e){o(e)})},n.ResetPassword=function(e,o,a,r,n){t({method:"POST",url:"/api/user/resetpassword",data:{username:e,password:o,confirmPassword:a,code:decodeURIComponent(r.replace(/\%20/g,"+"))},headers:{__RequestVerificationToken:$("input[name=__RequestVerificationToken]").attr("value")}}).success(function(e){n(e)})},n.SetCredentials=function(r,n,s){e.encode(r+":"+n);a.globals={currentUser:{username:r,userData:s,authdata:$("input[name=__RequestVerificationToken]").attr("value")}},t.defaults.headers.common.Authorization="Basic "+$("input[name=__RequestVerificationToken]").attr("value"),o.put("globals",a.globals)},n.ClearCredentials=function(){a.globals={},o.remove("globals"),t.defaults.headers.common.Authorization="Basic "},n}]).factory("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(t){var o,a,r,n,s,i="",c="",l="",u=0;do o=t.charCodeAt(u++),a=t.charCodeAt(u++),c=t.charCodeAt(u++),r=o>>2,n=(3&o)<<4|a>>4,s=(15&a)<<2|c>>6,l=63&c,isNaN(a)?s=l=64:isNaN(c)&&(l=64),i=i+e.charAt(r)+e.charAt(n)+e.charAt(s)+e.charAt(l),o=a=c="",r=n=s=l="";while(u<t.length);return i},decode:function(t){var o,a,r,n,s,i="",c="",l="",u=0,d=/[^A-Za-z0-9\+\/\=]/g;d.exec(t)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=e.indexOf(t.charAt(u++)),n=e.indexOf(t.charAt(u++)),s=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),o=r<<2|n>>4,a=(15&n)<<4|s>>2,c=(3&s)<<6|l,i+=String.fromCharCode(o),64!=s&&(i+=String.fromCharCode(a)),64!=l&&(i+=String.fromCharCode(c)),o=a=c="",r=n=s=l="";while(u<t.length);return i}}})}(),function(e){function t(e){var t="01",o={};for(var a in e){var r=parseInt(t,2);o[e[a]]={bitMask:r,title:e[a]},t=(r<<1).toString(2)}return o}function o(e,t){var o,a,r={};for(var n in e)if("string"==typeof e[n])if("*"===e[n]){o="";for(a in t)o+="1";r[n]={bitMask:parseInt(o,2),title:e[n]}}else console.log("Access Control Error: Could not parse '"+e[n]+"' as access definition for level '"+n+"'");else{o=0;for(a in e[n])t.hasOwnProperty(e[n][a])?o|=t[e[n][a]].bitMask:console.log("Access Control Error: Could not find role '"+e[n][a]+"' in registered roles while building access for '"+n+"'");r[n]={bitMask:o,title:e[n][a]}}return r}var a={roles:["public","user","admin"],accessLevels:{"public":"*",anon:["public"],user:["user","admin"],admin:["admin"]}};e.userRoles=t(a.roles),e.accessLevels=o(a.accessLevels,e.userRoles)}("undefined"==typeof exports?this:exports),function(){"use strict";angular.module("Authentication").controller("loginController",["$scope","$rootScope","$location","AuthenticationService","MessageService",function(e,t,o,a,r){a.ClearCredentials(),e.login=function(){e.dataLoading=!0,a.Login(e.username,e.password,function(t){t.success?(a.SetCredentials(e.username,e.password,t.data),o.path("/"),r.addAlert(t.message,"success")):(e.error=t.message,e.dataLoading=!1)})}}])}(),function(){"use strict";angular.module("app").controller("HomeController",function(e){e.users=angular.fromJson(localStorage.getItem("userStorage"))})}(),function(){"use strict";angular.module("Authentication").controller("registerController",["$scope","$location","AuthenticationService","$http",function(e,t,o,a){o.ClearCredentials(),a.get("/api/admin/roles").success(function(t){e.roles={availableOptions:t.data,selectedOption:t.data[0]}}).error(function(){e.message="An error has occured while loading role drop down list!","danger"}),e.login=function(){o.ClearCredentials(),t.path("/login")},e.register=function(){e.dataLoading=!0,o.Register(e.username,e.password,e.confirmPassword,e.email,e.roles.selectedOption.name,function(a){a.success?(o.SetCredentials(e.username,e.password,a.data),t.path("/"),$rootScope.addAlert(a.message,"success")):(e.error=a.message,e.dataLoading=!1)})}}])}(),function(){"use strict";angular.module("Authentication").controller("logoffController",["$scope","$rootScope","$location","AuthenticationService","MessageService","$http","$interval",function(e,t,o,a,r,n,s){e.logoff=function(){t.globals.currentUser&&(e.loggingOff=!0,a.Logoff(function(t){t.success?(a.ClearCredentials(),o.path("/login")):(e.error=t.message,e.loggingOff=!1)}))},setInterval(function(){e.initFirst()},3600),e.initFirst=function(){t.globals.currentUser&&void 0!=t.globals.currentUser.userData&&n.get("/api/admin/"+t.globals.currentUser.userData.id+"/notifications").success(function(t){e.notifications=t.data,e.countUnRead=0,e.countNew=0;for(var o=0;o<e.notifications.length;o++)e.notifications[o].isRead||e.countUnRead++,e.notifications[o].isNew&&e.countNew++}).error(function(){r.clearAlert(),r.addAlert("An error has occured while loading list of all notifications!","danger")})},e.markAsRead=function(o){n.put("/api/admin/"+t.globals.currentUser.userData.id+"/notifications/"+o,e.globals.currentUser.userData.id,o).success(function(e){}).error(function(e){r.clearAlert(),r.addAlert("An error has occured while updating notifications ticket id = "+o,"danger")})},e.clearNewNotifications=function(){e.countNew>0&&n.put("/api/admin/"+t.globals.currentUser.userData.id+"/notifications/clearnew",e.globals.currentUser.userData.id).success(function(t){e.countNew=0}).error(function(e){r.clearAlert(),r.addAlert("An error has occured while updating notifications","danger")})},e.clearNotifications=function(){n.put("/api/admin/"+t.globals.currentUser.userData.id+"/notifications/clear",t.globals.currentUser.userData.id).success(function(t){e.countNew=0,e.countUnRead=0}).error(function(e){r.clearAlert(),r.addAlert("An error has occured while clearing notifications","danger")})}}])}(),function(){"use strict";angular.module("app").directive("passwordMatch",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(e,t,o,a){var r=function(){var t=e.$eval(o.ngModel),a=e.$eval(o.passwordMatch);return t===a};e.$watch(r,function(e){a.$setValidity("match",e)})}}}).directive("remoteValidated",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(e,t,o,a){var r=[];e.$watch(o.ngModel,function(e,t){if(e){if(-1!==r.indexOf(e))return a.$setValidity(o.remoteValidated,!1);a.$error[o.remoteValidated]&&r.push(t),a.$setValidity(o.remoteValidated,!0)}})}}})}(),function(){"use strict";angular.module("ShowMessage").factory("MessageService",["$rootScope",function(e){return void 0===e.alerts&&(e.alerts=[]),{addAlert:function(t,o){return e.alerts.push({type:o,msg:t}),e.alerts},closeAlert:function(t){e.alerts.splice(t,1)},clearAlert:function(){e.alerts=[]}}}])}(),function(){"use strict";angular.module("Authentication").controller("forgotPasswordController",["$scope","$rootScope","$location","AuthenticationService",function(e,t,o,a){a.ClearCredentials(),e.forgotPassword=function(){e.forgotPasswordConfirm=!1,a.ForgotPassword(e.email,function(t){t.success?e.forgotPasswordConfirm=!0:e.error=t.message})}}])}(),function(){"use strict";angular.module("Authentication").controller("resetPasswordController",["$scope","$location","AuthenticationService","$http",function(e,t,o,a){o.ClearCredentials(),e.login=function(){o.ClearCredentials(),t.path("/login")},e.resetPassword=function(){void 0!==t.search().code&&(e.code=encodeURIComponent(t.search().code)),e.dataLoading=!0,o.ResetPassword(e.username,e.password,e.confirmPassword,e.code,function(a){a.success?(o.SetCredentials(e.username,e.password,a.data),t.path("/"),$rootScope.addAlert(a.message,"success")):(e.error=a.message,e.dataLoading=!1)})}}])}(),function(){"use strict";angular.module("fileUpload",["ngFileUpload"]).controller("fileUploadController",["$scope","$http","$timeout","$compile","Upload",function($scope,$http,$timeout,$compile,Upload){function uploadUsingUpload(e,t){e.upload=Upload.upload({url:"https://angular-file-upload-cors-srv.appspot.com/upload"+$scope.getReqParams(),resumeSizeUrl:t?"https://angular-file-upload-cors-srv.appspot.com/upload?name="+encodeURIComponent(e.name):null,resumeChunkSize:t?$scope.chunkSize:null,headers:{"optional-header":"header-value"},data:{username:$scope.username,file:e}}),e.upload.then(function(t){$timeout(function(){e.result=t.data})},function(e){e.status>0&&($scope.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))}),e.upload.xhr(function(e){})}function uploadUsing$http(e){e.upload=Upload.http({url:"https://angular-file-upload-cors-srv.appspot.com/upload"+$scope.getReqParams(),method:"POST",headers:{"Content-Type":e.type},data:e}),e.upload.then(function(t){e.result=t.data},function(e){e.status>0&&($scope.errorMsg=e.status+": "+e.data)}),e.upload.progress(function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})}function uploadS3(e){e.upload=Upload.upload({url:$scope.s3url,method:"POST",data:{key:e.name,AWSAccessKeyId:$scope.AWSAccessKeyId,acl:$scope.acl,policy:$scope.policy,signature:$scope.signature,"Content-Type":null===e.type||""===e.type?"application/octet-stream":e.type,filename:e.name,file:e}}),e.upload.then(function(t){$timeout(function(){e.result=t.data})},function(e){e.status>0&&($scope.errorMsg=e.status+": "+e.data)}),e.upload.progress(function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))}),storeS3UploadConfigInLocalStore()}function storeS3UploadConfigInLocalStore(){3===$scope.howToSend&&localStorage&&(localStorage.setItem("s3url",$scope.s3url),localStorage.setItem("AWSAccessKeyId",$scope.AWSAccessKeyId),localStorage.setItem("acl",$scope.acl),localStorage.setItem("success_action_redirect",$scope.success_action_redirect),localStorage.setItem("policy",$scope.policy),localStorage.setItem("signature",$scope.signature))}var version="11.0.0";$scope.usingFlash=FileAPI&&null!=FileAPI.upload,$scope.changeAngularVersion=function(){window.location.hash=$scope.angularVersion,window.location.reload(!0)},$scope.angularVersion=window.location.hash.length>1?window.location.hash.substring(1===window.location.hash.indexOf("/")?2:1):"1.2.24",$scope.invalidFiles=[],$scope.$watch("files",function(e){if($scope.formUpload=!1,null!=e){if(!angular.isArray(e))return void $timeout(function(){$scope.files=e=[e]});for(var t=0;t<e.length;t++)Upload.imageDimensions(e[t]).then(function(e){$scope.d=e}),$scope.errorMsg=null,function(e){$scope.upload(e,!0)}(e[t])}}),$scope.uploadPic=function(e){$scope.formUpload=!0,null!=e&&$scope.upload(e)},$scope.upload=function(e,t){$scope.errorMsg=null,1===$scope.howToSend?uploadUsingUpload(e,t):2==$scope.howToSend?uploadUsing$http(e):uploadS3(e)},$scope.isResumeSupported=Upload.isResumeSupported(),$scope.restart=function(e){Upload.isResumeSupported()?$http.get("https://angular-file-upload-cors-srv.appspot.com/upload?restart=true&name="+encodeURIComponent(e.name)).then(function(){$scope.upload(e,!0)}):$scope.upload(e)},$scope.chunkSize=1e5,$scope.generateSignature=function(){$http.post("/s3sign?aws-secret-key="+encodeURIComponent($scope.AWSSecretKey),$scope.jsonPolicy).success(function(e){$scope.policy=e.policy,$scope.signature=e.signature})},localStorage&&($scope.s3url=localStorage.getItem("s3url"),$scope.AWSAccessKeyId=localStorage.getItem("AWSAccessKeyId"),$scope.acl=localStorage.getItem("acl"),$scope.success_action_redirect=localStorage.getItem("success_action_redirect"),$scope.policy=localStorage.getItem("policy"),$scope.signature=localStorage.getItem("signature")),$scope.success_action_redirect=$scope.success_action_redirect||window.location.protocol+"//"+window.location.host,$scope.jsonPolicy=$scope.jsonPolicy||'{\n  "expiration": "2020-01-01T00:00:00Z",\n  "conditions": [\n    {"bucket": "angular-file-upload"},\n    ["starts-with", "$key", ""],\n    {"acl": "private"},\n    ["starts-with", "$Content-Type", ""],\n    ["starts-with", "$filename", ""],\n    ["content-length-range", 0, 524288000]\n  ]\n}',$scope.acl=$scope.acl||"private",$scope.confirm=function(){return confirm("Are you sure? Your local changes will be lost.")},$scope.getReqParams=function(){return $scope.generateErrorOnServer?"?errorCode="+$scope.serverErrorCode+"&errorMessage="+$scope.serverErrorMsg:""},angular.element(window).bind("dragover",function(e){e.preventDefault()}),angular.element(window).bind("drop",function(e){e.preventDefault();

}),$scope.modelOptionsObj={},$scope.$watch("validate+dragOverClass+modelOptions+resize+resizeIf",function(v){$scope.validateObj=eval("(function(){return "+$scope.validate+";})()"),$scope.dragOverClassObj=eval("(function(){return "+$scope.dragOverClass+";})()"),$scope.modelOptionsObj=eval("(function(){return "+$scope.modelOptions+";})()"),$scope.resizeObj=eval("(function($file){return "+$scope.resize+";})()"),$scope.resizeIfFn=eval("(function(){var fn = function($file, $width, $height){return "+$scope.resizeIf+";};return fn;})()")}),$timeout(function(){$scope.capture=localStorage.getItem("capture"+version)||"camera",$scope.pattern=localStorage.getItem("pattern"+version)||"image/*,audio/*,video/*",$scope.acceptSelect=localStorage.getItem("acceptSelect"+version)||"image/*,audio/*,video/*",$scope.modelOptions=localStorage.getItem("modelOptions"+version)||"{debounce:100}",$scope.dragOverClass=localStorage.getItem("dragOverClass"+version)||"{accept:'dragover', reject:'dragover-err', pattern:'image/*,audio/*,video/*,text/*'}",$scope.disabled="true"==localStorage.getItem("disabled"+version)||!1,$scope.multiple="true"==localStorage.getItem("multiple"+version)||!1,$scope.allowDir="true"==localStorage.getItem("allowDir"+version)||!0,$scope.validate=localStorage.getItem("validate"+version)||"{size: {max: '20MB', min: '10B'}, height: {max: 12000}, width: {max: 12000}, duration: {max: '5m'}}",$scope.keep="true"==localStorage.getItem("keep"+version)||!1,$scope.keepDistinct="true"==localStorage.getItem("keepDistinct"+version)||!1,$scope.orientation="true"==localStorage.getItem("orientation"+version)||!1,$scope.resize=localStorage.getItem("resize"+version)||"{width: 1000, height: 1000, centerCrop: true}",$scope.resizeIf=localStorage.getItem("resizeIf"+version)||"$width > 5000 || $height > 5000",$scope.dimensions=localStorage.getItem("dimensions"+version)||"$width < 12000 || $height < 12000",$scope.duration=localStorage.getItem("duration"+version)||"$duration < 10000",$scope.$watch("validate+capture+pattern+acceptSelect+disabled+capture+multiple+allowDir+keep+orientation+keepDistinct+modelOptions+dragOverClass+resize+resizeIf",function(){localStorage.setItem("capture"+version,$scope.capture),localStorage.setItem("pattern"+version,$scope.pattern),localStorage.setItem("acceptSelect"+version,$scope.acceptSelect),localStorage.setItem("disabled"+version,$scope.disabled),localStorage.setItem("multiple"+version,$scope.multiple),localStorage.setItem("allowDir"+version,$scope.allowDir),localStorage.setItem("validate"+version,$scope.validate),localStorage.setItem("keep"+version,$scope.keep),localStorage.setItem("orientation"+version,$scope.orientation),localStorage.setItem("keepDistinct"+version,$scope.keepDistinct),localStorage.setItem("dragOverClass"+version,$scope.dragOverClass),localStorage.setItem("modelOptions"+version,$scope.modelOptions),localStorage.setItem("resize"+version,$scope.resize),localStorage.setItem("resizeIf"+version,$scope.resizeIf)})})}])}(),function(){"use strict";angular.module("app").directive("routeRefresh",function(e,t){return function(o,a,r){a.bind("click",function(){var o=e.absUrl();(a[0]&&a[0].href&&a[0].href===o||o.indexOf("?")>=0||o.indexOf("=")>=0||o.indexOf("&")>=0)&&t.location.reload()})}})}(),function(){"use strict";angular.module("app").directive("markNotificationAsRead",function(e,t){return function(e,t,o){t.bind("click",function(){(t[0]&&t[0].href||t[0].href.indexOf("?")>=0||t[0].href.indexOf("=")>=0||t[0].href.indexOf("&")>=0)&&t[0].href.indexOf("?action=")>0&&t[0].href.indexOf("&id=")>0&&e.markAsRead(t[0].href.substring(t[0].href.indexOf("&id=")+4))})}})}();